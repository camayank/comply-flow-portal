# =============================================================================
# COMPLY FLOW PORTAL - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit the .env file to version control
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
PORT=5000
APP_NAME="Comply Flow Portal"
APP_URL=http://localhost:5000
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:5000

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=complyflow_dev
DB_USER=postgres
# SECURITY: Set a strong password. Never use default passwords in production!
DB_PASSWORD=
DB_SSL=false

# Alternative: Use DATABASE_URL for production (Heroku/Render style)
# DATABASE_URL=postgresql://username:password@host:port/database

# Test Database (for running tests)
DB_NAME_TEST=complyflow_test

# Database Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# SECURITY: Generate secure secrets using: node scripts/generate-secrets.js
# NEVER use default values in production. Each secret should be unique.
JWT_SECRET=REPLACE_WITH_SECURE_SECRET_RUN_generate-secrets.js
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_SECRET=REPLACE_WITH_SECURE_SECRET_RUN_generate-secrets.js
JWT_REFRESH_EXPIRY=7d
JWT_ISSUER=comply-flow-portal
JWT_AUDIENCE=comply-flow-users

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================
# SECURITY: Generate using: node scripts/generate-secrets.js
SESSION_SECRET=REPLACE_WITH_SECURE_SECRET_RUN_generate-secrets.js
SESSION_EXPIRY=86400000
SESSION_NAME=complyflow.sid

# =============================================================================
# OTP CONFIGURATION
# =============================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Endpoint-specific Rate Limiting
RATE_LIMIT_AUTH_WINDOW=15
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_OTP_WINDOW=15
RATE_LIMIT_OTP_MAX=3
RATE_LIMIT_API_WINDOW=15
RATE_LIMIT_API_MAX=100
RATE_LIMIT_UPLOAD_WINDOW=60
RATE_LIMIT_UPLOAD_MAX=10

# CORS Settings
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# Encryption
# SECURITY: Must be exactly 64 hex characters (32 bytes). Generate using: node scripts/generate-secrets.js
ENCRYPTION_KEY=REPLACE_WITH_64_HEX_CHARACTERS_RUN_generate-secrets.js
ENCRYPTION_ALGORITHM=aes-256-gcm

# =============================================================================
# EMAIL SERVICE (SMTP)
# =============================================================================
EMAIL_PROVIDER=smtp
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password
EMAIL_FROM_NAME=Comply Flow Portal
EMAIL_FROM_ADDRESS=noreply@complyflow.com

# Gmail App Password: https://myaccount.google.com/apppasswords
# For production, use services like SendGrid, AWS SES, or Mailgun

# SendGrid (Alternative)
SENDGRID_API_KEY=

# Mailgun (Alternative)
MAILGUN_API_KEY=
MAILGUN_DOMAIN=

# AWS SES (Alternative)
AWS_SES_REGION=
AWS_SES_ACCESS_KEY=
AWS_SES_SECRET_KEY=

# =============================================================================
# SMS SERVICE (Twilio)
# =============================================================================
SMS_ENABLED=true
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# MSG91 (Alternative)
MSG91_AUTH_KEY=
MSG91_SENDER_ID=
MSG91_ROUTE=4

# AWS SNS (Alternative)
AWS_SNS_REGION=
AWS_SNS_ACCESS_KEY=
AWS_SNS_SECRET_KEY=

# Alternative SMS Providers:
# - MSG91: https://msg91.com/
# - TextLocal: https://www.textlocal.in/
# - AWS SNS

# =============================================================================
# WHATSAPP CONFIGURATION
# =============================================================================
WHATSAPP_ENABLED=true
WHATSAPP_PROVIDER=twilio

# Twilio WhatsApp
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# WhatsApp Business API (Alternative)
WHATSAPP_BUSINESS_ACCOUNT_ID=your-whatsapp-business-account-id
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_PHONE_NUMBER=+1234567890

# WhatsApp Business API: https://business.whatsapp.com/

# =============================================================================
# PAYMENT GATEWAY (Razorpay)
# =============================================================================
RAZORPAY_ENABLED=true
RAZORPAY_KEY_ID=your-razorpay-key-id
RAZORPAY_KEY_SECRET=your-razorpay-key-secret
RAZORPAY_WEBHOOK_SECRET=your-razorpay-webhook-secret

# Razorpay Dashboard: https://dashboard.razorpay.com/

# Payment Configuration
PAYMENT_CURRENCY=INR
PAYMENT_MIN_AMOUNT=100
PAYMENT_MAX_AMOUNT=10000000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
# Storage: local, s3, cloudinary
FILE_STORAGE=local
FILE_UPLOAD_PATH=./uploads
FILE_MAX_SIZE=52428800
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx,xls,xlsx,zip

# Maximum file size: 50MB (in bytes)
# Supported: documents (PDF, DOC, DOCX), images (JPG, PNG, GIF)

# AWS S3 Configuration (if using S3)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=ap-south-1
AWS_S3_BUCKET=complyflow-documents

# Cloudinary Configuration (if using Cloudinary)
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# Google Cloud Storage (Alternative)
GCS_BUCKET=
GCS_PROJECT_ID=
GCS_KEY_FILE=

# =============================================================================
# GOOGLE SERVICES (Optional)
# =============================================================================
# Google OAuth (for Google login)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:5000/api/v1/auth/google/callback

# Google Drive API (for document storage)
GOOGLE_DRIVE_API_KEY=your-google-drive-api-key
GOOGLE_DRIVE_FOLDER_ID=your-folder-id

# Google Sheets API (For imports)
GOOGLE_SHEETS_ENABLED=false
GOOGLE_SERVICE_ACCOUNT_EMAIL=
GOOGLE_PRIVATE_KEY=

# =============================================================================
# CACHE (Redis)
# =============================================================================
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# Redis Cloud: https://redis.com/

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d

# Log Levels: error, warn, info, http, verbose, debug, silly

# =============================================================================
# SOCKET.IO / WEBSOCKET (Real-time Features)
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=5001
SOCKET_IO_PATH=/socket.io
SOCKET_IO_CORS_ORIGIN=http://localhost:3000

# =============================================================================
# EXTERNAL APIs (Government Portal Integration)
# =============================================================================
# MCA API
MCA_API_ENABLED=false
MCA_API_KEY=your-mca-api-key
MCA_API_URL=https://www.mca.gov.in/mcafoportal

# GST API
GST_API_ENABLED=false
GST_API_KEY=your-gst-api-key
GST_API_URL=https://api.gst.gov.in

# Income Tax API
INCOME_TAX_API_URL=https://www.incometax.gov.in

# =============================================================================
# NOTIFICATION SETTINGS
# =============================================================================
# Enable/Disable notification channels
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SMS_ENABLED=true
NOTIFICATION_WHATSAPP_ENABLED=true
NOTIFICATION_IN_APP_ENABLED=true
NOTIFICATION_PUSH_ENABLED=false

# =============================================================================
# CRON JOBS & SCHEDULED TASKS
# =============================================================================
CRON_ENABLED=true
CRON_TIMEZONE=Asia/Kolkata

# Cron schedules (use cron syntax)
CRON_DEADLINE_REMINDER=0 9 * * *
CRON_PAYMENT_REMINDER=0 10 * * *
CRON_TASK_REMINDER=0 8 * * *
CRON_WEEKLY_REPORT=0 10 * * 1
CRON_MONTHLY_REPORT=0 10 1 * *
CRON_REPORT_GENERATION=0 0 * * 0

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_AGENT_PORTAL=true
FEATURE_CLIENT_PORTAL=true
FEATURE_SALES_PORTAL=true
FEATURE_OPERATIONS_PORTAL=true
FEATURE_ADMIN_PORTAL=true
FEATURE_PAYMENT_GATEWAY=true
FEATURE_WHATSAPP_INTEGRATION=true
FEATURE_GOVERNMENT_INTEGRATION=false
FEATURE_AI_DOCUMENT_PROCESSING=false

# =============================================================================
# BUSINESS CONFIGURATION
# =============================================================================
DEFAULT_TAX_RATE=18
DEFAULT_COMMISSION_RATE=10

# Invoice Configuration
INVOICE_PREFIX=INV
INVOICE_START_NUMBER=1001

# Service Request Configuration
SR_PREFIX=SR
SR_START_NUMBER=10001

# Lead Configuration
LEAD_PREFIX=LD
LEAD_START_NUMBER=50001

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================
DEBUG=false
VERBOSE_LOGGING=false
SHOW_STACK_TRACE=true
DB_QUERY_LOGGING=false

# Mock Services (for development without external credentials)
# Set to true to use mock implementations that log to console instead of
# connecting to external services. Recommended for local development.
MOCK_EMAIL=true
MOCK_SMS=true
MOCK_PAYMENT=true
MOCK_WHATSAPP=true

# NOTE: In production, set all MOCK_* to false and configure actual credentials

# API Documentation (Swagger)
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs
ENABLE_API_DOCS=true

# =============================================================================
# MONITORING & ANALYTICS
# =============================================================================
# Sentry Error Tracking
SENTRY_ENABLED=false
SENTRY_DSN=your-sentry-dsn

# Google Analytics
GOOGLE_ANALYTICS_ENABLED=false
GA_TRACKING_ID=your-ga-tracking-id

# New Relic APM
NEW_RELIC_LICENSE_KEY=your-new-relic-key
NEW_RELIC_APP_NAME=Comply Flow Portal

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================
BACKUP_ENABLED=true
BACKUP_PATH=./backups
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# Daily backup at 2 AM

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
DATA_RETENTION_DAYS=2555
DATA_ENCRYPTION_KEY=your_encryption_key_change_this

# Data retention: 7 years (2555 days) as per compliance requirements

# =============================================================================
# TIMEZONE & LOCALIZATION
# =============================================================================
TZ=Asia/Kolkata
TIMEZONE=Asia/Kolkata
DEFAULT_LANGUAGE=en
DEFAULT_LOCALE=en-IN
DEFAULT_CURRENCY=INR
DEFAULT_DATE_FORMAT=DD/MM/YYYY

# Supported Languages: en (English), hi (Hindi)
# Supported Currencies: INR, USD

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
# Zoho CRM (Optional)
ZOHO_CLIENT_ID=your-zoho-client-id
ZOHO_CLIENT_SECRET=your-zoho-client-secret
ZOHO_REFRESH_TOKEN=your-zoho-refresh-token

# Slack Notifications (Optional)
SLACK_WEBHOOK_URL=your-slack-webhook-url
SLACK_CHANNEL=#complyflow-alerts

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
