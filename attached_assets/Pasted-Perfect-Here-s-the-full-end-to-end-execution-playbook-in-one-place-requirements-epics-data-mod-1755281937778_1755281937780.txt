Perfect. Here’s the full, end-to-end execution playbook in one place—requirements → epics → data model → API contracts → UI specs → workflows → QA plan → DevOps → security → analytics → acceptance criteria. It’s designed so engineering, product, and design can ship Phase-1 Full Build without blocking.


---

DigiComply – Full Build Execution Playbook (v1)

0) Scope & Success Criteria

In-scope (Phase-1 Full Build)

All 4 stakeholders live: Client, Ops, Admin, Agent

No-code Workflow Builder; Tasking + SLA; Document Vault with approvals; Messaging/Notifications; Search/Filters; Analytics v1; Audit; RBAC

Integration-ready adapters (MCA/GSTN later)


Phase-1 Success KPIs

90%+ tasks tracked inside system (no off-platform)

80% of client status queries deflected by portal

SLA compliance ≥ 85% in first 60 days

Rework ratio ≤ 8%



---

1) Product Epics → Stories (Build Order)

EPIC A — Authentication & RBAC

A1. User auth (password + OTP)

A2. Roles: Admin, Ops Exec, Ops Lead, Client, Agent

A3. Entity-scoped access (client ↔ multiple entities)

A4. 2FA for high-risk actions (download sensitive docs, workflow edits)


EPIC B — Admin No-Code Workflow Builder

B1. Service catalogue CRUD

B2. Workflow designer: steps, dependencies (DAG), deadlines, required docs, client tasks

B3. Template versioning; apply global updates to eligible in-flight orders

B4. Cross-service dependencies (e.g., GST after Incorporation)

B5. QA gates & checklists per step


EPIC C — Service & Task Orchestration

C1. Create ServiceOrder from template

C2. Task list auto-spawn; dependencies enforced

C3. Assignment (manual; auto-assignment rules later)

C4. SLA timers: start/pause/resume; breach & escalation

C5. Kanban + List views; bulk actions; priority flags


EPIC D — Document Service

D1. Vault: service/doctype folders, versioning, tags

D2. Upload (client & ops), virus scan, metadata capture

D3. Approval/rejection with reasons; re-upload loop

D4. Expiry & renewal reminders; bulk nudge

D5. Secure delivery: presigned URLs, watermarking, view/download logs


EPIC E — Client Portal

E1. Multi-entity switcher; service cards with progress %

E2. Milestones with timestamps; Gantt timeline

E3. Pending client actions; one-click upload; templates

E4. Messaging per service (threaded; attachments)

E5. Deliverables archive; compliance score trend


EPIC F — Ops Workspace

F1. “My Tasks” + Team board; SLA countdown per task

F2. Internal notes, @mentions, internal files

F3. QA review workflows; rework logging

F4. Pending-on-client panel; blockers view

F5. Knowledge base links per service step


EPIC G — Agent Portal

G1. Lead submission with KYC stub

G2. Lead status: New→Contacted→Converted→In Progress→Closed

G3. High-level client progress (no internal docs)

G4. Commission ledger & payout schedule; dispute form

G5. Collateral library; announcements; tickets


EPIC H — Notifications & Messaging

H1. Channels: In-app + Email (WhatsApp template-ready)

H2. Events: status change, doc approved/rejected, SLA risk, renewal due

H3. Preferences per user; quiet hours; escalation overrides

H4. Delivery receipts & audit


EPIC I — Search, Filters & Analytics v1

I1. Global search across clients/services/tasks/docs

I2. Saved views & filters (role-specific)

I3. Dashboards: SLA compliance, backlog aging, rework %, throughput

I4. Export CSV/XLSX/PDF; scheduled reports


EPIC J — Audit, Security & Settings

J1. Immutable audit log (WORM for critical events)

J2. Access logs; device/IP restrictions (admin)

J3. Backup/restore; data retention policies

J4. Branding (logo/colors/templates)



---

2) System Architecture (Reference)

Frontend: React TS, Tailwind, Radix UI, React Query, Router

Backend: Node/Express, Postgres (RDS), Redis (cache/queues), BullMQ (jobs), S3-compatible storage, WebSockets

Services: Auth/RBAC, Workflow Engine, Task Service, Document Service, Notification Service, Analytics (event pipeline), Audit

Event bus (internal): service.created, task.updated, doc.approved, sla.at_risk, message.posted, commission.updated



---

3) Data Model (Key Tables & Fields)

Core

users: id, email, phone, role, status, twofa_secret, created_at

entities: id, user_id(owner), type, name, identifiers(jsonb: CIN/GSTIN/PAN), active

service_orders: id, entity_id, service_type, status, workflow_version, created_at, due_at, flags(jsonb)

tasks: id, service_order_id, name, type, status, assignee_id, due_at, checklist(jsonb), deps(jsonb), priority

documents: id, service_order_id, uploader_id, doctype, status, version, path, size, tags(jsonb), expiry_at

messages: id, service_order_id, thread_id, author_id, body, visibility(client/internal), attachments(jsonb)

agents: id, user_id, territory, manager_id, kyc_status

leads: id, agent_id, prospect(jsonb), status, assigned_to, created_at

commissions: id, agent_id, service_order_id, amount, status, payable_on

notifications: id, user_id, event_type, channel, payload(jsonb), status, sent_at

audit_logs: id, actor_id, action, target_type, target_id, ip, meta(jsonb), created_at


Indices

Btree on foreign keys; GIN on jsonb (tags, props); trigram index for search on names/ids.



---

4) API Contracts (Representative)

Auth

POST /auth/login {email/phone, password/otp} → {token, roles}

POST /auth/2fa/verify → {ok}


Admin – Services/Workflows

GET /admin/services

POST /admin/services {name, desc, sla_days}

POST /admin/workflows {service_type, steps: [{key, name, requires_docs:[doctype], checklist[], default_deadline_days, depends_on:[stepKey], qa_required:boolean}]}

POST /admin/workflows/:id/apply {apply_to: "all|eligible_inflight" }


Orders & Tasks

POST /orders {entity_id, service_type, workflow_version?}

GET /orders/:id → {status, milestones, tasks[]}

POST /tasks/:id/status {status, notes?}

POST /tasks/:id/assign {assignee_id}


Documents

POST /orders/:id/documents (multipart) → {doc_id, version, status:"pending"}

POST /documents/:id/approve {notes?}

POST /documents/:id/reject {reason}


Messaging/Notifications

POST /orders/:id/messages {visibility, body, attachments?}

Webhook receivers for email/WhatsApp delivery receipts (future)


Agents & Leads

POST /agents/leads {prospect, files?}

GET /agents/commissions → list with statuses

POST /agents/commissions/:id/dispute {reason}


Search & Reports

GET /search?q=...&scope=clients|services|tasks|docs

GET /reports/sla | /reports/ops | /reports/agent



---

5) UI Specifications (Screen-level)

Client Portal

Home: Entity switcher; service cards (name, status chip, % progress, due date)

Service Detail: Milestone rail; timeline; “Your Actions” panel; doc locker (upload, versions, approval state); message thread; deliverables

Docs: Filters (service, doctype, status, expiry)

Notifications: Feed + preferences


Ops Workspace

My Tasks: tabs (All, Due Today, SLA Risk, Waiting on Client); bulk status update

Board View: To Do / In Progress / Waiting / QA / Done

Task Drawer: instructions; checklist; files (internal/client); comments; deps graph; SLA countdown

Team View: capacity, assignments, reassign


Admin Control

Dashboard: SLA compliance, backlog aging, bottlenecks, pending client actions, workload heatmap

Workflow Builder: step cards; drag/drop; dependency lines; form editor for step properties; QA toggle; preview & publish; apply-to dialog

Users & Roles: CRUD; role matrix

Settings: branding, notifications, integrations, retention


Agent Portal

Leads: add lead; status pipeline; assign/transfer

Earnings: ledger, upcoming payouts, disputes

Resources: collateral, announcements, tickets



---

6) Business Workflows (Happy & Edge Cases)

Document Approval Loop

1. Client uploads → status pending_review


2. Ops reviews → approve (→ available to client) OR reject (→ reason + reminder to re-upload)


3. Audit logs each step with actor, IP, timestamp



SLA & Escalation

Timer starts on task open; pauses on waiting_on_client or govt_pending

T-24/T-4 warnings; breach → escalate to Ops Lead + Admin; incident id created


Global Workflow Update

Admin changes Step-3 checklist → “Apply to all in-flight not yet past Step-3” → preview impact → confirm → migration job updates affected orders (with logs)


Cross-Service Dependency

GST order blocked until Incorporation is Completed; UI hints and link to parent service



---

7) QA Strategy (Shift-Left + Automation)

Test Pyramid

Unit: workflow engine, SLA timers, RBAC guards

Integration: doc upload/approve/reject; task deps; notifications

E2E (Cypress/Playwright): Client happy path, Ops happy path, Admin edit-and-apply, Agent lead→commission

Non-functional: load (1k concurrent users), failover of job workers, recovery from partial uploads


Key Test Cases

Wrong doc upload → rejection shows reason → re-upload accepted

SLA pause/resume on waiting states

Role isolation: agent cannot see internal notes/docs

Global apply does not modify steps already completed



---

8) DevOps & Delivery

Pipelines

Git main/dev; PR checks: lint, unit, integration, build

Infra as Code (Terraform) for RDS, Redis, S3, buckets, queues

Blue/green deploy; DB migrations with rollback plan

Secrets via KMS/SSM; rotation policy


Environments

Dev → Staging (prod-like data shape) → Prod

Feature flags for WhatsApp, auto-assignment, OCR


Observability

Logs: structured JSON with correlation IDs

Metrics: p95 latency, queue depth, job failures, SLA breach count

Traces: request→workflow actions→notifications

Alerts: on error rates, queue backlog, SLA breach spikes



---

9) Security, Privacy, Compliance

AES-256 at rest; TLS in transit; presigned URL timeboxes

RBAC down to service_order & document; least privilege

2FA for admins/ops & sensitive client downloads

WORM audit log for critical actions (workflow publishes, deliverable releases)

Data retention: configurable; purge/archival jobs

IP/device allowlist for Admin (optional)

Regular vulnerability scans & dependency updates



---

10) Analytics & BI (v1)

Events to capture

service.created, task.completed, task.rework, doc.rejected, sla.breached, message.sent, deliverable.downloaded


Dashboards

Ops: SLA %, AHT per service, queue aging, rework % by step

Client CX: status requests vs. portal logins, doc rejection reasons, CSAT post-completion

Agent: leads→conversion funnel, payout cycle time


Exports: scheduled weekly PDFs + CSVs to admin emails.


---

11) Performance Budgets (NFRs)

P95 page load < 2.5s; P95 API < 350ms (cached reads)

Upload success ≥ 99% for ≤ 25MB files; resumable uploads

Uptime 99.9% core; RPO ≤ 15m; RTO ≤ 1h



---

12) Rollout & Cutover Plan

Week 0 Data Prep: import existing clients/entities; seed top 10 workflows; create roles

Pilot (Internal): 5 clients, 2 services (Incorporation, GST registration)

Hardening: fix SLA edges, doc rejection UX, apply global changes dry-run

GA: enable agent portal; enable scheduled reports; lock audit WORM



---

13) Risk Register & Mitigations

Scope creep in Workflow Builder → Freeze v1 schema; backlog v2 (conditional branches, formulas)

SLA timer drift → centralized job scheduler; clock skew guard; idempotent updates

Doc storage misuse → strict MIME/AV scan; extension whitelist; download watermark

User adoption → in-product tours, success checklists; SLA & status visibility from Day-1



---

14) Acceptance Criteria (Go/No-Go)

Admin can design, publish, and apply a workflow without code.

Ops can execute assigned tasks with deps & QA gates; SLA counters visible.

Client can see status, upload/reupload, message, and download deliverables without support.

Agent can submit leads & view commissions without accessing confidential data.

All actions are audited; search & filters work across modules; notifications delivered & logged.



---

15) “Build-First” Checklist (What to code immediately)

1. RBAC & auth skeleton; entity scoping


2. Workflow engine (templates + instantiate orders + deps)


3. Task service (status machine + SLA timers + pause states)


4. Document service (upload→approve/reject→version→deliver)


5. Client portal (service card → detail → docs → messages)


6. Ops board (my tasks, checklist, QA, comments)


7. Admin builder (MVP drag/drop, publish, apply)


8. Notifications (in-app + email)


9. Audit & search


10. Analytics counters & exports




---

This is the comprehensive single-source blueprint to deliver Phase-1 in full and iterate confidently. If you want, I can also provide ready-to-copy Jira epics/stories, DB migration scripts (DDL stubs), and API Swagger YAML in your next step.

